<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate interactive forest plot with a select list as filter — forestly • forestly</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Generate interactive forest plot with a select list as filter — forestly" />
<meta property="og:description" content="Generate interactive forest plot with a select list as filter" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">forestly</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/design_plan.html">Design Plan of R Package forestly</a>
    </li>
    <li>
      <a href="../articles/dmc_report.html">Interactive Safety Reports for DMC</a>
    </li>
    <li>
      <a href="../articles/example.html">Interactive Forest Plot for DMC</a>
    </li>
    <li>
      <a href="../articles/onboarding.html">onboarding</a>
    </li>
    <li>
      <a href="../articles/rate_compare.html">Unstratified and Stratified  Miettinen and Nurminen Test</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate interactive forest plot with a select list as filter</h1>
    
    <div class="hidden name"><code>forestly.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generate interactive forest plot with a select list as filter</p>
    </div>

    <pre class="usage"><span class='fu'>forestly</span><span class='op'>(</span>
  <span class='va'>db</span>,
  fig_prop_color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#00857C"</span>, <span class='st'>"#66203A"</span><span class='op'>)</span>,
  fig_prop_label <span class='op'>=</span> <span class='cn'>NULL</span>,
  fig_prop_colwidth <span class='op'>=</span> <span class='fl'>300</span>,
  fig_diff_color <span class='op'>=</span> <span class='st'>"black"</span>,
  fig_diff_label <span class='op'>=</span> <span class='cn'>NULL</span>,
  fig_diff_colwidth <span class='op'>=</span> <span class='fl'>300</span>,
  small_sample <span class='op'>=</span> <span class='cn'>NULL</span>,
  forest_table_width <span class='op'>=</span> <span class='fl'>1200</span>,
  forest_table_bottom_margin <span class='op'>=</span> <span class='fl'>50</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>db</th>
      <td><p>a list of two components:
(1) db$table: ae data frame rbinded by interested ae labels
(2) db$listing: a standard adverse event data frame with select columns</p></td>
    </tr>
    <tr>
      <th>fig_prop_color</th>
      <td><p>a character vector of length two to specify the colors to plot the two proportions.
The first entry refers to the color of the AE proportion in the treatment arm.
The second entry refers to the color of the AE proportion in the control arm.
The default value is c("gold", "purple").</p></td>
    </tr>
    <tr>
      <th>fig_prop_label</th>
      <td><p>a character vector of length two to specify the x-axis label of the two propositions plots.
The first entry refers to the x-lab legend of the treatment arm.
The second entry refers to the x-lab legend of the control arm.
The default value is  c("treatment", "control")</p></td>
    </tr>
    <tr>
      <th>fig_prop_colwidth</th>
      <td><p>a numerical value to specify the column width of the two proportion plot
the default value is 300</p></td>
    </tr>
    <tr>
      <th>fig_diff_color</th>
      <td><p>a string to specify the color to plot the error bar.
The default value is "black".</p></td>
    </tr>
    <tr>
      <th>fig_diff_label</th>
      <td><p>a string to specify the x-axis legend of the error bar.
The default value is "treatment &lt;- Favor -&gt; control".</p></td>
    </tr>
    <tr>
      <th>fig_diff_colwidth</th>
      <td><p>a numerical value to specify the column width of the two proportion plot
the default value is 300</p></td>
    </tr>
    <tr>
      <th>small_sample</th>
      <td><p>a integral vector of length 2. The first element is for treatment group and
the second element is for control group. The default value is c(4, 4).</p></td>
    </tr>
    <tr>
      <th>forest_table_width</th>
      <td><p>the width of the forest plot reactbale</p></td>
    </tr>
    <tr>
      <th>forest_table_bottom_margin</th>
      <td><p>the bottom margin of the forest plot reactable</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a reactable with a select list</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>forestly</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'>## No stratum ----------------------------------------------</span></span>
<span class='r-in'><span class='co'>## Tidy data</span></span>
<span class='r-in'><span class='va'>db</span> <span class='op'>&lt;-</span> <span class='fu'><a href='tidy_ae_table.html'>tidy_ae_table</a></span><span class='op'>(</span>population_from  <span class='op'>=</span> <span class='va'>adsl</span> <span class='op'><a href='%>%.html'>%&gt;%</a></span> <span class='fu'>rename</span><span class='op'>(</span>TRTA <span class='op'>=</span> <span class='va'>TRT01A</span><span class='op'>)</span>,</span>
<span class='r-in'>                    observation_from <span class='op'>=</span> <span class='va'>adae</span>,</span>
<span class='r-in'>                    population_where <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>                    observation_where <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>                    treatment_var <span class='op'>=</span> <span class='st'>"TRTA"</span>,</span>
<span class='r-in'>                    treatment_order <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"MK9999"</span> <span class='op'>=</span> <span class='st'>"Xanomeline High Dose"</span>, <span class='st'>"Placebo"</span> <span class='op'>=</span> <span class='st'>"Placebo"</span><span class='op'>)</span>,</span>
<span class='r-in'>                    stratum_var <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>                    ae_var <span class='op'>=</span> <span class='st'>"AEDECOD"</span>,</span>
<span class='r-in'>                    ae_interested <span class='op'>=</span> <span class='fu'><a href='define_ae_select_list.html'>define_ae_select_list</a></span><span class='op'>(</span>ae_criterion <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'AESER == "Y"'</span>,</span>
<span class='r-in'>                                                                           <span class='st'>'AEREL != "NONE"'</span><span class='op'>)</span>,</span>
<span class='r-in'>                                                          ae_label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"with serious adverse events"</span>,</span>
<span class='r-in'>                                                                       <span class='st'>"with drug-related adverse events"</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>                    listing_interested <span class='op'>=</span> <span class='fu'><a href='define_ae_listing.html'>define_ae_listing</a></span><span class='op'>(</span>listing_var <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"USUBJID"</span>, <span class='st'>"SEX"</span>, <span class='st'>"AGE"</span>, <span class='st'>"AEDECOD"</span><span class='op'>)</span>,</span>
<span class='r-in'>                                                           listing_label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ID"</span>, <span class='st'>"Gender"</span>, <span class='st'>"Age"</span>, <span class='st'>"Adverse Event"</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>                    ae_listing_label <span class='op'>=</span> <span class='st'>"Adverse Event"</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'>## Generate interavtive forest plot</span></span>
<span class='r-in'><span class='fu'>forestly</span><span class='op'>(</span><span class='va'>db</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>forestly</span><span class='op'>(</span><span class='va'>db</span>,</span>
<span class='r-in'>         fig_prop_color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"gold"</span>, <span class='st'>"purple"</span><span class='op'>)</span>,</span>
<span class='r-in'>         fig_prop_label <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>         fig_diff_color <span class='op'>=</span> <span class='st'>"black"</span>,</span>
<span class='r-in'>         fig_diff_label <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>         small_sample <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## With stratum ----------------------------------------------</span></span>
<span class='r-in'><span class='co'>## Impute stratum </span></span>
<span class='r-in'><span class='va'>adsl</span><span class='op'>$</span><span class='va'>STRATUMN</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>3</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>adsl</span><span class='op'>$</span><span class='va'>USUBJID</span><span class='op'>)</span>, prob <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.3</span>, <span class='fl'>0.3</span>, <span class='fl'>0.4</span><span class='op'>)</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>adae</span> <span class='op'>&lt;-</span> <span class='va'>adae</span> <span class='op'><a href='%>%.html'>%&gt;%</a></span> <span class='fu'>left_join</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>USUBJID <span class='op'>=</span> <span class='va'>adsl</span><span class='op'>$</span><span class='va'>USUBJID</span>, STRATUMN <span class='op'>=</span> <span class='va'>adsl</span><span class='op'>$</span><span class='va'>STRATUMN</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'>## Tidy data</span></span>
<span class='r-in'><span class='va'>db</span> <span class='op'>&lt;-</span> <span class='fu'><a href='tidy_ae_table.html'>tidy_ae_table</a></span><span class='op'>(</span>population_from  <span class='op'>=</span> <span class='va'>adsl</span> <span class='op'><a href='%>%.html'>%&gt;%</a></span> <span class='fu'>rename</span><span class='op'>(</span>TRTA <span class='op'>=</span> <span class='va'>TRT01A</span><span class='op'>)</span>,</span>
<span class='r-in'>                    observation_from <span class='op'>=</span> <span class='va'>adae</span>,</span>
<span class='r-in'>                    population_where <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>                    observation_where <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>                    treatment_var <span class='op'>=</span> <span class='st'>"TRTA"</span>,</span>
<span class='r-in'>                    treatment_order <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"MK9999"</span> <span class='op'>=</span> <span class='st'>"Xanomeline High Dose"</span>, <span class='st'>"Placebo"</span> <span class='op'>=</span> <span class='st'>"Placebo"</span><span class='op'>)</span>,</span>
<span class='r-in'>                    stratum_var <span class='op'>=</span> <span class='st'>"STRATUMN"</span>, </span>
<span class='r-in'>                    ae_var <span class='op'>=</span> <span class='st'>"AEDECOD"</span>,</span>
<span class='r-in'>                    ae_interested <span class='op'>=</span> <span class='fu'><a href='define_ae_select_list.html'>define_ae_select_list</a></span><span class='op'>(</span>ae_criterion <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'AESER == "Y"'</span>,</span>
<span class='r-in'>                                                                           <span class='st'>'AEREL != "NONE"'</span><span class='op'>)</span>,</span>
<span class='r-in'>                                                          ae_label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"with serious adverse events"</span>,</span>
<span class='r-in'>                                                                       <span class='st'>"with drug-related adverse events"</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>                    listing_interested <span class='op'>=</span> <span class='fu'><a href='define_ae_listing.html'>define_ae_listing</a></span><span class='op'>(</span>listing_var <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"USUBJID"</span>, <span class='st'>"SEX"</span>, <span class='st'>"AGE"</span>, <span class='st'>"AEDECOD"</span><span class='op'>)</span>,</span>
<span class='r-in'>                                                           listing_label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ID"</span>, <span class='st'>"Gender"</span>, <span class='st'>"Age"</span>, <span class='st'>"Adverse Event"</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>                    ae_listing_label <span class='op'>=</span> <span class='st'>"Adverse Event"</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'>## Generate interavtive forest plot</span></span>
<span class='r-in'><span class='fu'>forestly</span><span class='op'>(</span><span class='va'>db</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>forestly</span><span class='op'>(</span><span class='va'>db</span>,</span>
<span class='r-in'>         fig_prop_color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"gold"</span>, <span class='st'>"purple"</span><span class='op'>)</span>,</span>
<span class='r-in'>         fig_prop_label <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>         fig_diff_color <span class='op'>=</span> <span class='st'>"black"</span>,</span>
<span class='r-in'>         fig_diff_label <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span class='r-in'>         small_sample <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Yilong Zhang. Site built with pkgdown 1.6.1.
  </p>
  <p>Copyright &copy; Merck Sharp & Dohme Corp., a subsidiary of Merck & Co., Inc., Kenilworth, NJ, USA.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


